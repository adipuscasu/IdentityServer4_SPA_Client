2019-10-12 02:17:58.941 +03:00 [INF] Seeding database...
2019-10-12 02:18:00.367 +03:00 [DBG] Clients being populated
2019-10-12 02:18:00.975 +03:00 [DBG] IdentityResources being populated
2019-10-12 02:18:01.055 +03:00 [DBG] ApiResources being populated
2019-10-12 02:18:01.155 +03:00 [INF] Done seeding database.
2019-10-12 21:36:45.868 +03:00 [INF] Starting host...
2019-10-12 21:36:46.224 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2019-10-12 21:36:46.532 +03:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-10-12 21:36:46.532 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-10-12 21:36:46.532 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-10-12 21:36:46.532 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-10-12 21:36:46.532 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-10-12 21:36:46.533 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-10-12 21:36:46.950 +03:00 [DBG] Login Url: /Account/Login
2019-10-12 21:36:46.952 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-10-12 21:36:46.952 +03:00 [DBG] Logout Url: /Account/Logout
2019-10-12 21:36:46.952 +03:00 [DBG] ConsentUrl Url: /consent
2019-10-12 21:36:46.952 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-10-12 21:36:46.952 +03:00 [DBG] Error Url: /home/error
2019-10-12 21:36:46.952 +03:00 [DBG] Error Id Parameter: errorId
2019-10-12 21:36:57.597 +03:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-10-12 21:44:34.304 +03:00 [INF] Starting host...
2019-10-12 21:44:34.534 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2019-10-12 21:44:34.680 +03:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-10-12 21:44:34.680 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-10-12 21:44:34.681 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-10-12 21:44:34.681 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-10-12 21:44:34.681 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-10-12 21:44:34.681 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-10-12 21:44:34.949 +03:00 [DBG] Login Url: /Account/Login
2019-10-12 21:44:34.951 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-10-12 21:44:34.951 +03:00 [DBG] Logout Url: /Account/Logout
2019-10-12 21:44:34.951 +03:00 [DBG] ConsentUrl Url: /consent
2019-10-12 21:44:34.951 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-10-12 21:44:34.951 +03:00 [DBG] Error Url: /home/error
2019-10-12 21:44:34.952 +03:00 [DBG] Error Id Parameter: errorId
2019-10-12 21:44:52.883 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-10-12 21:44:52.888 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-10-12 21:44:52.888 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-10-12 21:44:52.893 +03:00 [DBG] Start discovery request
2019-10-12 21:44:54.391 +03:00 [ERR] Failed executing DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]
2019-10-12 21:44:54.466 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'IdentityResources'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.QueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:0b40c119-8e57-42c4-ba94-49ef996ff87c
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'IdentityResources'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.QueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:0b40c119-8e57-42c4-ba94-49ef996ff87c
Error Number:208,State:1,Class:16
2019-10-12 21:44:54.489 +03:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'IdentityResources'.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)\r\n   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)\r\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:0b40c119-8e57-42c4-ba94-49ef996ff87c\r\nError Number:208,State:1,Class:16","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Invalid object name 'IdentityResources'.","ActivityId":"80000030-0002-fd00-b63f-84710c7967bb","TimeStamp":"2019-10-12T18:44:54.0000000Z","ProcessId":14008,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-10-12 21:44:54.500 +03:00 [FTL] Unhandled exception: Invalid object name 'IdentityResources'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'IdentityResources'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:0b40c119-8e57-42c4-ba94-49ef996ff87c
Error Number:208,State:1,Class:16
2019-10-12 21:57:19.740 +03:00 [INF] Starting host...
2019-10-12 21:57:19.945 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2019-10-12 21:57:20.113 +03:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-10-12 21:57:20.113 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-10-12 21:57:20.113 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-10-12 21:57:20.113 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-10-12 21:57:20.113 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-10-12 21:57:20.113 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-10-12 21:57:20.372 +03:00 [DBG] Login Url: /Account/Login
2019-10-12 21:57:20.374 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-10-12 21:57:20.374 +03:00 [DBG] Logout Url: /Account/Logout
2019-10-12 21:57:20.374 +03:00 [DBG] ConsentUrl Url: /consent
2019-10-12 21:57:20.374 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-10-12 21:57:20.374 +03:00 [DBG] Error Url: /home/error
2019-10-12 21:57:20.374 +03:00 [DBG] Error Id Parameter: errorId
2019-10-12 21:57:31.780 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-10-12 21:57:31.784 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-10-12 21:57:31.784 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-10-12 21:57:31.786 +03:00 [DBG] Start discovery request
2019-10-12 21:57:33.073 +03:00 [ERR] Failed executing DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]
2019-10-12 21:57:33.129 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'IdentityResources'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.QueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:7f94660f-ddfe-4a68-b729-f78f3fdf03a6
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'IdentityResources'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.QueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:7f94660f-ddfe-4a68-b729-f78f3fdf03a6
Error Number:208,State:1,Class:16
2019-10-12 21:57:33.151 +03:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'IdentityResources'.\r\n   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\r\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\r\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\r\n   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()\r\n   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()\r\n   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)\r\n   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)\r\n   at System.Data.Common.DbCommand.ExecuteReader()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)\r\n   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)\r\n   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)\r\n   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:7f94660f-ddfe-4a68-b729-f78f3fdf03a6\r\nError Number:208,State:1,Class:16","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Invalid object name 'IdentityResources'.","ActivityId":"80000033-0002-fd00-b63f-84710c7967bb","TimeStamp":"2019-10-12T18:57:33.0000000Z","ProcessId":21144,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-10-12 21:57:33.165 +03:00 [FTL] Unhandled exception: Invalid object name 'IdentityResources'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'IdentityResources'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.RelationalShapedQueryCompilingExpressionVisitor.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.LargeArrayBuilder`1.AddRange(IEnumerable`1 items)
   at System.Collections.Generic.EnumerableHelpers.ToArray[T](IEnumerable`1 source)
   at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:7f94660f-ddfe-4a68-b729-f78f3fdf03a6
Error Number:208,State:1,Class:16
2019-10-13 11:47:16.267 +03:00 [INF] Starting host...
2019-10-13 11:47:16.579 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2019-10-13 11:47:16.885 +03:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-10-13 11:47:16.885 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-10-13 11:47:16.885 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-10-13 11:47:16.885 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-10-13 11:47:16.885 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-10-13 11:47:16.885 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-10-13 11:47:17.282 +03:00 [DBG] Login Url: /Account/Login
2019-10-13 11:47:17.284 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-10-13 11:47:17.284 +03:00 [DBG] Logout Url: /Account/Logout
2019-10-13 11:47:17.284 +03:00 [DBG] ConsentUrl Url: /consent
2019-10-13 11:47:17.284 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-10-13 11:47:17.284 +03:00 [DBG] Error Url: /home/error
2019-10-13 11:47:17.284 +03:00 [DBG] Error Id Parameter: errorId
2019-10-13 11:47:22.748 +03:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-10-13 11:47:40.576 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-10-13 11:47:40.673 +03:00 [INF] {"Username":"adi.puscasu@gmail.com","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"80000007-0003-fe00-b63f-84710c7967bb","TimeStamp":"2019-10-13T08:47:40.0000000Z","ProcessId":11936,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-10-13 12:02:25.940 +03:00 [INF] Starting host...
2019-10-13 12:02:26.180 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2019-10-13 12:02:26.441 +03:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-10-13 12:02:26.441 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-10-13 12:02:26.441 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-10-13 12:02:26.441 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-10-13 12:02:26.441 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-10-13 12:02:26.441 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-10-13 12:02:26.699 +03:00 [DBG] Login Url: /Account/Login
2019-10-13 12:02:26.700 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-10-13 12:02:26.700 +03:00 [DBG] Logout Url: /Account/Logout
2019-10-13 12:02:26.700 +03:00 [DBG] ConsentUrl Url: /consent
2019-10-13 12:02:26.700 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-10-13 12:02:26.700 +03:00 [DBG] Error Url: /home/error
2019-10-13 12:02:26.701 +03:00 [DBG] Error Id Parameter: errorId
2019-10-13 12:02:29.254 +03:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-10-13 12:02:31.001 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-10-13 12:03:52.613 +03:00 [INF] Starting host...
2019-10-13 12:03:52.835 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2019-10-13 12:03:52.982 +03:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-10-13 12:03:52.982 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-10-13 12:03:52.982 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-10-13 12:03:52.983 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-10-13 12:03:52.983 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-10-13 12:03:52.983 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-10-13 12:03:53.220 +03:00 [DBG] Login Url: /Account/Login
2019-10-13 12:03:53.222 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-10-13 12:03:53.222 +03:00 [DBG] Logout Url: /Account/Logout
2019-10-13 12:03:53.222 +03:00 [DBG] ConsentUrl Url: /consent
2019-10-13 12:03:53.222 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-10-13 12:03:53.222 +03:00 [DBG] Error Url: /home/error
2019-10-13 12:03:53.222 +03:00 [DBG] Error Id Parameter: errorId
2019-10-13 12:03:55.093 +03:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-10-13 12:03:56.431 +03:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-10-13 12:06:44.628 +03:00 [INF] Starting host...
2019-10-13 12:06:44.873 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2019-10-13 12:06:45.040 +03:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-10-13 12:06:45.040 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-10-13 12:06:45.040 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-10-13 12:06:45.040 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-10-13 12:06:45.041 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-10-13 12:06:45.041 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-10-13 12:06:45.335 +03:00 [DBG] Login Url: /Account/Login
2019-10-13 12:06:45.337 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-10-13 12:06:45.337 +03:00 [DBG] Logout Url: /Account/Logout
2019-10-13 12:06:45.337 +03:00 [DBG] ConsentUrl Url: /consent
2019-10-13 12:06:45.337 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-10-13 12:06:45.337 +03:00 [DBG] Error Url: /home/error
2019-10-13 12:06:45.338 +03:00 [DBG] Error Id Parameter: errorId
2019-10-13 12:08:48.703 +03:00 [INF] Starting host...
2019-10-13 12:08:50.192 +03:00 [ERR] Failed executing DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants];
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[PersistedGrants]') AND [c].[name] = N'Type');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [PersistedGrants] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [PersistedGrants] ALTER COLUMN [Type] nvarchar(50) NOT NULL;
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2019-10-13 12:11:47.055 +03:00 [INF] Starting host...
2019-10-13 12:11:49.955 +03:00 [INF] Starting IdentityServer4 version 3.0.1.0
2019-10-13 12:11:49.970 +03:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-10-13 12:11:49.970 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-10-13 12:11:49.970 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-10-13 12:11:49.970 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-10-13 12:11:49.970 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-10-13 12:11:49.970 +03:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-10-13 12:11:50.216 +03:00 [DBG] Login Url: /Account/Login
2019-10-13 12:11:50.218 +03:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-10-13 12:11:50.218 +03:00 [DBG] Logout Url: /Account/Logout
2019-10-13 12:11:50.218 +03:00 [DBG] ConsentUrl Url: /consent
2019-10-13 12:11:50.218 +03:00 [DBG] Consent Return Url Parameter: returnUrl
2019-10-13 12:11:50.218 +03:00 [DBG] Error Url: /home/error
2019-10-13 12:11:50.218 +03:00 [DBG] Error Id Parameter: errorId
